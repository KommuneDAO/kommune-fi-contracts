â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     KOMMUNEFI V2 - STABLE MODE INTEGRATED TEST              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Test Plan:
  1. Deploy fresh contracts with STABLE profile
  2. Test with 3 wallets - deposit & withdraw
  3. Test unstake & claim (optional)
  4. Verify LST distribution

ğŸ’° Checking wallet balances...
  Wallet 1: 26.047978765730837379 KAIA (need 0.1 KAIA)
  Wallet 2: 276.129980597319063481 KAIA (need 0.01 KAIA)
  Wallet 3: 14.697200528467860854 KAIA (need 0.01 KAIA)
âœ… All wallets have sufficient balance

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 1: DEPLOY FRESH CONTRACTS (STABLE PROFILE)           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ Deploying fresh contracts with STABLE profile...


ğŸš€ Running: Fresh Deployment (STABLE)
ğŸš€ FRESH STABLE DEPLOYMENT - IGNORING ALL OLD CONTRACTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Deployment Configuration:
  Network: kairos
  ChainId: 1001n
  Deployer: 0xdc926E34E73292cD7c48c6fD7375af7D93435D36
  Balance: 26.047978765730837379 KAIA

ğŸ“ Network Constants:
  WKAIA: 0x0339d5Eb6D195Ba90B13ed1BCeAa97EbD198b106
  Balancer Vault: 0x1c9074AA147648567015287B0d4185Cb4E04F86d
  Treasury: 0xdc926E34E73292cD7c48c6fD7375af7D93435D36

1ï¸âƒ£ Deploying ClaimManager (non-upgradeable)...
   âœ… ClaimManager deployed at: 0xabE76832a99A798f5C7EfB1bB5c9136c5c865F58

2ï¸âƒ£ Deploying SwapContract (UUPS proxy)...
   âœ… SwapContract deployed at: 0x14E5FBb1864873F59809EC041dc4b9BEc413424F

3ï¸âƒ£ Deploying LPCalculations library...
   âœ… LPCalculations library deployed at: 0xb9A135aeEA2ba89c5bCDF41a13B79d95225C1ee7

4ï¸âƒ£ Deploying VaultCore (UUPS proxy)...
Warning: Potentially unsafe deployment of src/VaultCore.sol:VaultCore

    You are using the `unsafeAllow.external-library-linking` flag to include external libraries.
    Make sure you have manually checked that the linked libraries are upgrade safe.

Warning: Potentially unsafe deployment of src/VaultCore.sol:VaultCore

    You are using the `unsafeAllow.delegatecall` flag.

   âœ… VaultCore deployed at: 0x9F1518D10373AF7d9BA27b23958db59eD1427202
   ğŸ“Š Investment Ratio: 100% (all funds to LSTs, no buffer)

5ï¸âƒ£ Deploying ShareVault (UUPS proxy)...
   âœ… ShareVault deployed at: 0x672cB6EF21C3F4c26B555f9f74454D8854849902

6ï¸âƒ£ Configuring connections...
   âœ… VaultCore.setShareVault completed
   âœ… VaultCore.setClaimManager completed
   âœ… SwapContract.setAuthorizedCaller completed

7ï¸âƒ£ LST tokens already configured in contract initialization
   âœ… wKoKAIA configured: true
   âœ… wGCKAIA configured: true
   âœ… wstKLAY configured: true
   âœ… stKAIA configured: true

8ï¸âƒ£ Setting initial APY...
   âœ… APY set to actual production values

9ï¸âƒ£ Setting investment ratios...
   âœ… Investment ratios configured:
      - Stable (LST): 100%
      - Balanced: 0%
      - Aggressive: 0%

ğŸ”Ÿ Saving deployment addresses...
   âœ… Deployment addresses saved to deployments-stable-kairos.json

1ï¸âƒ£1ï¸âƒ£ Verifying deployment...
   ShareVault <-> VaultCore: âœ…
   VaultCore -> SwapContract: âœ…
   VaultCore -> ClaimManager: âœ…
   SwapContract authorized: âœ…
   APY configured: âœ…
   Investment Ratios:
      Invest: 100%
      Balanced: 0%
      Aggressive: 0%

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ‰ FRESH STABLE DEPLOYMENT COMPLETE!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ New Deployment Summary:
  ShareVault: 0x672cB6EF21C3F4c26B555f9f74454D8854849902
  VaultCore: 0x9F1518D10373AF7d9BA27b23958db59eD1427202
  SwapContract: 0x14E5FBb1864873F59809EC041dc4b9BEc413424F
  ClaimManager: 0xabE76832a99A798f5C7EfB1bB5c9136c5c865F58
  WKAIA: 0x0339d5Eb6D195Ba90B13ed1BCeAa97EbD198b106

ğŸ“Š Investment Profile: STABLE
  Total Investment: 100%
  Stable Strategy: 100% (LST staking)
  Liquidity Buffer: 0%

ğŸ’¡ Next Steps:
  1. Run integration tests: npx hardhat run scripts/testIntegrated.js --network kairos
  2. Change profile if needed using setInvestmentRatios()
  3. Adjust APY distribution if needed
âœ… Fresh Deployment (STABLE) completed

âœ… Contracts deployed:
  ShareVault: 0x672cB6EF21C3F4c26B555f9f74454D8854849902
  VaultCore: 0x9F1518D10373AF7d9BA27b23958db59eD1427202
  SwapContract: 0x14E5FBb1864873F59809EC041dc4b9BEc413424F

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 2: SETUP PROVIDER & FEE CONFIGURATION                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ Setting up wallet1 as provider...
  âœ… Added wallet1 as provider: 0xdc926E34E73292cD7c48c6fD7375af7D93435D36

ğŸ“Š Fee Configuration:
  Withdrawal Fee: 0.3% (30 basis points)
  Treasury Address: 0xdc926E34E73292cD7c48c6fD7375af7D93435D36
  Provider (wallet1): 0xdc926E34E73292cD7c48c6fD7375af7D93435D36
  Fee Split: 1/3 to provider, 2/3 to treasury

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 3: 3-WALLET DEPOSIT/WITHDRAW TEST (STABLE)          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ Wallet 1 - Deposit with WKAIA (0.1 KAIA)...
  ğŸ”„ Wrapping KAIA to WKAIA...
  âœ… Wrapped 0.1 KAIA to WKAIA
  ğŸ”“ Approving ShareVault to spend WKAIA...
  âœ… Approved ShareVault
  ğŸ’° Depositing WKAIA...
  âœ… Deposited 0.1 WKAIA

2ï¸âƒ£ Wallet 2 - Deposit with KAIA (0.05 KAIA)...
  âœ… Deposited 0.05 KAIA

3ï¸âƒ£ Wallet 3 - Deposit with KAIA (0.01 KAIA)...
  âœ… Deposited 0.01 KAIA

ğŸ“Š LST Distribution Check (STABLE):
  LST 0: 0.037908700735372511 tokens
  LST 1: 0.035245641838351821 tokens
  LST 2: 0.044944532488114103 tokens
  LST 3: 0.034865293185419973 tokens

ğŸ“¤ Testing Withdrawals with Fees & Provider (STABLE):

ğŸ’° Initial Balances:
  Treasury: 25.599582215717752978 KAIA
  Provider (wallet1): 25.599582215717752978 KAIA

ğŸ‘¤ Wallet 2: Withdrawing 0.05 WKAIA (100% of max) with provider...
  âœ… Withdrew with provider
  ğŸ’µ Wallet2 received: 0.04985 KAIA (after 0.3% fee)
  ğŸ“Š Note: 100% withdrawal should trigger 2 LST swaps (stKAIA + wGCKAIA)
  â›½ Gas cost: 0.0191581 KAIA

ğŸ‘¤ Wallet 3: Withdrawing 0.004997921192761068 WKAIA (50% of max, no provider)...
  âœ… Withdrew without provider
  ğŸ’µ Wallet3 received: 0.004982927429182785 KAIA (after 0.3% fee)
  â›½ Gas cost: 0.01792295 KAIA

ğŸ“Š Fee Distribution Verification:
  Treasury received: 0.000164993763578283 KAIA
  Provider received: 0.000164993763578283 KAIA

  Expected fees from wallet2 (0.05 withdrawal):
    Total: 0.00015 KAIA
    Provider (1/3): 0.00005 KAIA
    Treasury (2/3): 0.0001 KAIA

  Expected fees from wallet3 (0.004997921192761068 withdrawal):
    Total: 0.000014993763578283 KAIA
    Treasury (all): 0.000014993763578283 KAIA

  âœ… Fee distribution verified:
    Provider fee match: âŒ
    Treasury fee match: âŒ

ğŸ” Verifying KAIA Distribution (not WKAIA):
  Wallet2 received KAIA directly: âœ…
  Wallet3 received KAIA directly: âœ…
  No WKAIA wrapping needed for users: âœ…

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 4: UNSTAKE & CLAIM TEST                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸ Running unstake & claim test (takes ~11 minutes)...

ğŸš€ Running: Unstake & Claim Test
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          UNSTAKE/CLAIM TEST (wKoKAIA ONLY)                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Owner: 0xdc926E34E73292cD7c48c6fD7375af7D93435D36
VaultCore: 0xf41B7e8852e7A0C1528BCaa206349119523ae9f9
WKAIA: 0x0339d5Eb6D195Ba90B13ed1BCeAa97EbD198b106
Network: KAIROS

Contract Owner: 0xdc926E34E73292cD7c48c6fD7375af7D93435D36
Is signer the owner? true

VaultCore wKoKAIA balance: 0.039832435335535541
VaultCore KoKAIA balance: 0.0

=== Unwrapping wKoKAIA to KoKAIA ===
Need to unwrap 0.003983243533553554 wKoKAIA to KoKAIA for unstaking...
Unwrap TX: 0x99a5cb26d8d42772021e04d175e413d65caaef2dd479e73e507815917b1d4488
âœ… Unwrap successful
New KoKAIA balance: 0.004722531105763282

=== Step 1: Owner Unstakes KoKAIA ===
Unstaking 0.004722531105763282 KoKAIA for protocol interest...
TX: 0x79dae7043c8ebf50abcb27c5f541b52a16d0abf515c472060dcc22ee2ae7a997
âœ… Unstake successful
KoKAIA balance after: 0.0

=== Step 2: Wait 10 Minutes (Testnet) ===
â° Waiting for claim period...
   â±ï¸  10 minutes 0 seconds remaining...     â±ï¸  9 minutes 56 seconds remaining...     â±ï¸  9 minutes 53 seconds remaining...     â±ï¸  9 minutes 50 seconds remaining...     â±ï¸  9 minutes 47 seconds remaining...     â±ï¸  9 minutes 44 seconds remaining...     â±ï¸  9 minutes 41 seconds remaining...     â±ï¸  9 minutes 38 seconds remaining...     â±ï¸  9 minutes 35 seconds remaining...     â±ï¸  9 minutes 32 seconds remaining...     â±ï¸  9 minutes 29 seconds remaining...     â±ï¸  9 minutes 26 seconds remaining...     â±ï¸  9 minutes 23 seconds remaining...     â±ï¸  9 minutes 20 seconds remaining...     â±ï¸  9 minutes 17 seconds remaining...     â±ï¸  9 minutes 14 seconds remaining...     â±ï¸  9 minutes 11 seconds remaining...     â±ï¸  9 minutes 8 seconds remaining...     â±ï¸  9 minutes 5 seconds remaining...     â±ï¸  9 minutes 2 seconds remaining...     â±ï¸  8 minutes 59 seconds remaining...     â±ï¸  8 minutes 56 seconds remaining...     â±ï¸  8 minutes 53 seconds remaining...     â±ï¸  8 minutes 50 seconds remaining...     â±ï¸  8 minutes 47 seconds remaining...     â±ï¸  8 minutes 44 seconds remaining...     â±ï¸  8 minutes 41 seconds remaining...     â±ï¸  8 minutes 38 seconds remaining...     â±ï¸  8 minutes 35 seconds remaining...     â±ï¸  8 minutes 32 seconds remaining...     â±ï¸  8 minutes 29 seconds remaining...     â±ï¸  8 minutes 26 seconds remaining...     â±ï¸  8 minutes 23 seconds remaining...     â±ï¸  8 minutes 20 seconds remaining...     â±ï¸  8 minutes 17 seconds remaining...     â±ï¸  8 minutes 14 seconds remaining...     â±ï¸  8 minutes 11 seconds remaining...     â±ï¸  8 minutes 8 seconds remaining...     â±ï¸  8 minutes 5 seconds remaining...     â±ï¸  8 minutes 2 seconds remaining...     â±ï¸  7 minutes 59 seconds remaining...     â±ï¸  7 minutes 56 seconds remaining...     â±ï¸  7 minutes 53 seconds remaining...     â±ï¸  7 minutes 50 seconds remaining...     â±ï¸  7 minutes 47 seconds remaining...     â±ï¸  7 minutes 44 seconds remaining...     â±ï¸  7 minutes 41 seconds remaining...     â±ï¸  7 minutes 38 seconds remaining...     â±ï¸  7 minutes 35 seconds remaining...     â±ï¸  7 minutes 32 seconds remaining...     â±ï¸  7 minutes 29 seconds remaining...     â±ï¸  7 minutes 26 seconds remaining...     â±ï¸  7 minutes 23 seconds remaining...     â±ï¸  7 minutes 20 seconds remaining...     â±ï¸  7 minutes 17 seconds remaining...     â±ï¸  7 minutes 14 seconds remaining...     â±ï¸  7 minutes 11 seconds remaining...     â±ï¸  7 minutes 8 seconds remaining...     â±ï¸  7 minutes 5 seconds remaining...     â±ï¸  7 minutes 2 seconds remaining...     â±ï¸  6 minutes 59 seconds remaining...     â±ï¸  6 minutes 56 seconds remaining...     â±ï¸  6 minutes 53 seconds remaining...     â±ï¸  6 minutes 50 seconds remaining...     â±ï¸  6 minutes 47 seconds remaining...     â±ï¸  6 minutes 44 seconds remaining...     â±ï¸  6 minutes 41 seconds remaining...     â±ï¸  6 minutes 38 seconds remaining...     â±ï¸  6 minutes 35 seconds remaining...     â±ï¸  6 minutes 32 seconds remaining...     â±ï¸  6 minutes 29 seconds remaining...     â±ï¸  6 minutes 26 seconds remaining...     â±ï¸  6 minutes 23 seconds remaining...     â±ï¸  6 minutes 20 seconds remaining...     â±ï¸  6 minutes 17 seconds remaining...     â±ï¸  6 minutes 14 seconds remaining...     â±ï¸  6 minutes 11 seconds remaining...     â±ï¸  6 minutes 8 seconds remaining...     â±ï¸  6 minutes 5 seconds remaining...     â±ï¸  6 minutes 2 seconds remaining...     â±ï¸  5 minutes 59 seconds remaining...     â±ï¸  5 minutes 56 seconds remaining...     â±ï¸  5 minutes 53 seconds remaining...     â±ï¸  5 minutes 50 seconds remaining...     â±ï¸  5 minutes 47 seconds remaining...     â±ï¸  5 minutes 44 seconds remaining...     â±ï¸  5 minutes 41 seconds remaining...     â±ï¸  5 minutes 38 seconds remaining...     â±ï¸  5 minutes 35 seconds remaining...     â±ï¸  5 minutes 32 seconds remaining...     â±ï¸  5 minutes 29 seconds remaining...     â±ï¸  5 minutes 26 seconds remaining...     â±ï¸  5 minutes 23 seconds remaining...     â±ï¸  5 minutes 20 seconds remaining...     â±ï¸  5 minutes 17 seconds remaining...     â±ï¸  5 minutes 14 seconds remaining...     â±ï¸  5 minutes 11 seconds remaining...     â±ï¸  5 minutes 8 seconds remaining...     â±ï¸  5 minutes 5 seconds remaining...     â±ï¸  5 minutes 2 seconds remaining...     â±ï¸  4 minutes 59 seconds remaining...     â±ï¸  4 minutes 56 seconds remaining...     â±ï¸  4 minutes 53 seconds remaining...     â±ï¸  4 minutes 50 seconds remaining...     â±ï¸  4 minutes 47 seconds remaining...     â±ï¸  4 minutes 44 seconds remaining...     â±ï¸  4 minutes 41 seconds remaining...     â±ï¸  4 minutes 38 seconds remaining...     â±ï¸  4 minutes 35 seconds remaining...     â±ï¸  4 minutes 32 seconds remaining...     â±ï¸  4 minutes 29 seconds remaining...     â±ï¸  4 minutes 26 seconds remaining...     â±ï¸  4 minutes 23 seconds remaining...     â±ï¸  4 minutes 20 seconds remaining...     â±ï¸  4 minutes 17 seconds remaining...     â±ï¸  4 minutes 14 seconds remaining...     â±ï¸  4 minutes 11 seconds remaining...     â±ï¸  4 minutes 8 seconds remaining...     â±ï¸  4 minutes 5 seconds remaining...     â±ï¸  4 minutes 2 seconds remaining...     â±ï¸  3 minutes 59 seconds remaining...     â±ï¸  3 minutes 56 seconds remaining...     â±ï¸  3 minutes 53 seconds remaining...     â±ï¸  3 minutes 50 seconds remaining...     â±ï¸  3 minutes 47 seconds remaining...     â±ï¸  3 minutes 44 seconds remaining...     â±ï¸  3 minutes 41 seconds remaining...     â±ï¸  3 minutes 38 seconds remaining...     â±ï¸  3 minutes 35 seconds remaining...     â±ï¸  3 minutes 32 seconds remaining...     â±ï¸  3 minutes 29 seconds remaining...     â±ï¸  3 minutes 26 seconds remaining...     â±ï¸  3 minutes 23 seconds remaining...     â±ï¸  3 minutes 20 seconds remaining...     â±ï¸  3 minutes 17 seconds remaining...     â±ï¸  3 minutes 14 seconds remaining...     â±ï¸  3 minutes 11 seconds remaining...     â±ï¸  3 minutes 8 seconds remaining...     â±ï¸  3 minutes 5 seconds remaining...     â±ï¸  3 minutes 2 seconds remaining...     â±ï¸  2 minutes 59 seconds remaining...     â±ï¸  2 minutes 56 seconds remaining...     â±ï¸  2 minutes 53 seconds remaining...     â±ï¸  2 minutes 50 seconds remaining...     â±ï¸  2 minutes 47 seconds remaining...     â±ï¸  2 minutes 44 seconds remaining...     â±ï¸  2 minutes 41 seconds remaining...     â±ï¸  2 minutes 38 seconds remaining...     â±ï¸  2 minutes 35 seconds remaining...     â±ï¸  2 minutes 32 seconds remaining...     â±ï¸  2 minutes 29 seconds remaining...     â±ï¸  2 minutes 26 seconds remaining...     â±ï¸  2 minutes 23 seconds remaining...     â±ï¸  2 minutes 20 seconds remaining...     â±ï¸  2 minutes 17 seconds remaining...     â±ï¸  2 minutes 14 seconds remaining...     â±ï¸  2 minutes 11 seconds remaining...     â±ï¸  2 minutes 8 seconds remaining...     â±ï¸  2 minutes 5 seconds remaining...     â±ï¸  2 minutes 2 seconds remaining...     â±ï¸  1 minutes 59 seconds remaining...     â±ï¸  1 minutes 56 seconds remaining...     â±ï¸  1 minutes 53 seconds remaining...     â±ï¸  1 minutes 50 seconds remaining...     â±ï¸  1 minutes 47 seconds remaining...     â±ï¸  1 minutes 44 seconds remaining...     â±ï¸  1 minutes 41 seconds remaining...     â±ï¸  1 minutes 38 seconds remaining...     â±ï¸  1 minutes 35 seconds remaining...     â±ï¸  1 minutes 32 seconds remaining...     â±ï¸  1 minutes 29 seconds remaining...     â±ï¸  1 minutes 26 seconds remaining...     â±ï¸  1 minutes 23 seconds remaining...     â±ï¸  1 minutes 20 seconds remaining...     â±ï¸  1 minutes 17 seconds remaining...     â±ï¸  1 minutes 14 seconds remaining...     â±ï¸  1 minutes 11 seconds remaining...     â±ï¸  1 minutes 8 seconds remaining...     â±ï¸  1 minutes 5 seconds remaining...     â±ï¸  1 minutes 2 seconds remaining...     â±ï¸  0 minutes 59 seconds remaining...     â±ï¸  0 minutes 56 seconds remaining...     â±ï¸  0 minutes 53 seconds remaining...     â±ï¸  0 minutes 50 seconds remaining...     â±ï¸  0 minutes 47 seconds remaining...     â±ï¸  0 minutes 44 seconds remaining...     â±ï¸  0 minutes 41 seconds remaining...     â±ï¸  0 minutes 38 seconds remaining...     â±ï¸  0 minutes 35 seconds remaining...     â±ï¸  0 minutes 32 seconds remaining...     â±ï¸  0 minutes 29 seconds remaining...     â±ï¸  0 minutes 26 seconds remaining...     â±ï¸  0 minutes 23 seconds remaining...     â±ï¸  0 minutes 20 seconds remaining...     â±ï¸  0 minutes 17 seconds remaining...     â±ï¸  0 minutes 14 seconds remaining...     â±ï¸  0 minutes 11 seconds remaining...     â±ï¸  0 minutes 8 seconds remaining...     â±ï¸  0 minutes 5 seconds remaining...     â±ï¸  0 minutes 2 seconds remaining...  
âœ… Wait period complete!

=== Step 3: Owner Claims ===
Claiming unstaked amount...
WKAIA balance before claim: 0.215264619751396854
TX: 0x11532fa0e9c9bc176542ab425d9b258c65dfa02c46ee3d7612be4f22b919b1b2
âœ… Claim successful
Claimed amount: 0.009969787889944706 KAIA
WKAIA balance after claim: 0.22523440764134156
WKAIA gained from claim: 0.009969787889944706

=== Final Verification ===
âœ… Claim successful! WKAIA increased in VaultCore
   This represents staking rewards harvested for the protocol
   The WKAIA stays in VaultCore for all users' benefit

ğŸ“Š Total Assets in VaultCore: 1.020870237414111039 WKAIA

âœ… Unstake/Claim test complete!
âœ… Unstake & Claim Test completed


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    TEST SUMMARY                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Completed Test Steps:
  1. Fresh deployment with STABLE profile âœ“
  2. Provider setup & fee configuration âœ“
  3. 3-wallet deposit/withdraw test with fees âœ“
  4. Unstake & claim test âœ“

âœ… New Features Tested:
  â€¢ Provider fee sharing (1/3 to provider, 2/3 to treasury)
  â€¢ KAIA direct distribution (no WKAIA wrapping for users)
  â€¢ 0.3% withdrawal fee collection

ğŸ“Š Final Stats:
  Total Assets: 0.104953572779965131 WKAIA
  Investment Ratio: 100%
  Mode: STABLE (LST staking only)

ğŸ’° Final Wallet Balances:
  Wallet 1: 0.1 shares
  Wallet 2: 0.0 shares
  Wallet 3: 0.005 shares

ğŸ‰ STABLE MODE TEST COMPLETED SUCCESSFULLY!
