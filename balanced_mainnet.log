â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     KOMMUNEFI V2 - BALANCED MODE INTEGRATED TEST            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Test Plan:
  Network: kaia
  ChainId: 8217n
  1. Deploy fresh BALANCED contracts
  2. Test with 3 wallets - deposit & withdraw
  3. Verify add liquidity success
  4. Verify remove liquidity fund recovery

ğŸ’° Checking wallet balances...
  Wallet 1: 0.505886657952991273 KAIA (need 0.1 KAIA)
  Wallet 2: 0.575647692140908097 KAIA (need 0.05 KAIA)
  Wallet 3: 1.484773171153802611 KAIA (need 0.01 KAIA)
âœ… All wallets have sufficient balance

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 1: DEPLOY FRESH CONTRACTS                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ Deploying fresh contracts for BALANCED test...

âœ… Contracts deployed:
  ShareVault: 0xF4C64918dbbdd7a17327C0Ea1aA625A9f3Ed2b9b
  VaultCore: 0x95A257399BeB3D2c959a1E64d35DD872Fdedb2dA
  SwapContract: 0x015da9B47A34F98C4efC70D9898e4E0913FF7e4d
  Profile: BALANCED (already configured)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 2: 3-WALLET DEPOSIT/WITHDRAW TEST (BALANCED)        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ Wallet 1 - Deposit with WKAIA (0.1 KAIA)...
  ğŸ”„ Wrapping KAIA to WKAIA...
  âœ… Wrapped 0.1 KAIA to WKAIA
  ğŸ”“ Approving ShareVault to spend WKAIA...
  âœ… Approved ShareVault
  ğŸ’° Depositing WKAIA...
  âœ… Deposited 0.1 WKAIA
  â³ Waiting for next block...

2ï¸âƒ£ Wallet 2 - Deposit with KAIA (0.05 KAIA)...
  âœ… Deposited 0.05 KAIA
  â³ Waiting for next block...

3ï¸âƒ£ Wallet 3 - Deposit with KAIA (0.01 KAIA)...
  âœ… Deposited 0.01 KAIA

â³ Waiting for LP operations to complete...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 3: VERIFY ADD LIQUIDITY SUCCESS                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” Checking LP Token Creation...
  LST 0: LP Value = 0.087004366550246102 tokens
  LST 1: LP Value = 0.057963170760378682 tokens
  LST 2: LP Value = 0.043838138659469532 tokens
  LST 3: LP Value = 0.147314853556324214 tokens

âœ… Add Liquidity Success!
  Total LP Positions: 4
  Total LP Value: 0.33612052952641853 LST tokens

ğŸ“¤ Testing Withdrawals (BALANCED):
  Wallet 2: Withdrawing 0.012644498313073058 WKAIA (30% of max)...
  âœ… Wallet 2: Successfully withdrew 30%
  ğŸ“Š Note: 30% withdrawal should work with available LST outside LP
  Wallet 3: Withdrawing 0.008155501880869646 WKAIA (100%)...
  âœ… Wallet 3: Successfully withdrew 100%

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   STEP 4: VERIFY REMOVE LIQUIDITY FUND RECOVERY             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’§ Testing Remove Liquidity...

  Removing liquidity from LST 0...
  LP value: 0.087004366550246102
  Current total LP balance: 0.535935614503884379 BPT
  Amount to remove: 0.01 BPT
  Calling removeLiquidity with index 0...
  âœ… Liquidity removed successfully
  LST recovered: 0.008853775572743725
  Remaining LP value: 0.085380947069784457

âœ… Fund Recovery Verified!
  LP tokens can be converted back to LST for withdrawals

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    TEST SUMMARY                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Completed Test Steps:
  1. Deploy fresh BALANCED contracts âœ“
  2. 3-wallet deposit/withdraw test âœ“
  3. Add liquidity verification âœ“
  4. Remove liquidity fund recovery âœ“

ğŸ“Š Final Stats:
  Total Assets: 0.108195702098757493 WKAIA
  Investment Ratio: 100%
  Mode: BALANCED (LST staking + LP pools)

ğŸ“Š LP Positions Summary:
  Active LP positions: 4
  Total LP value: 0.33612052952641853 LST tokens

ğŸ‰ BALANCED MODE TEST COMPLETED SUCCESSFULLY!
